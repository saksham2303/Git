<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
    <link href = "stylesheet.css" rel="stylesheet"/>
    <title>Table</title>
</head>
<body>
    <script type="text/javascript" 
    src="details.js">
</script>
    

    
    <div class="main">
        <table id="table">
            <tr id="hello">
                <th>id</th>
                <th>Name</th>
                <th>Company</th>
                <th>Email</th>
                <th>Job Role</th>
                <th>Location</th>
                <th>Delete</th>


                
            </tr>

            
            <script>
                console.log(data);
                
                
                function changeStyle(event){
                    document.getElementById("table").style.fontFamily="'Roboto', sans-serif";
                    document.getElementById("table").style.font="red";
                }
                
                function viewdata(event){
                    
                    data.products.map((det) => {
                        
                    //    console.log(data)
                       var tr = document.createElement("tr");
                        tr.id = "inf";
                        var idCell = document.createElement("td");
                        var nameCell = document.createElement("td");
                        var companyCell = document.createElement("td");
                        var emailCell = document.createElement("td");
                        var jobCell = document.createElement("td");
                        var locationCell = document.createElement("td");
                        var del = document.createElement("td");
                        var delet = document.createElement("button");
                        delet.type = "submit"
                        delet.onclick = (event) => removeitem(event,det.id);
                        delet.innerHTML = "Delete";
                        delet.id = "butt";
                        idCell.appendChild(document.createTextNode(det.id));
                        nameCell.appendChild(document.createTextNode(det.name));
                        companyCell.appendChild(document.createTextNode(det.company.companyname));
                        emailCell.appendChild(document.createTextNode(det.company.email));
                        jobCell.appendChild(document.createTextNode(det.company.jobrole));
                        locationCell.appendChild(document.createTextNode(det.company.location));
                        del.appendChild(delet);
                        var table = document.getElementById("table")

                        tr.appendChild(idCell);
                        tr.appendChild(nameCell);
                        tr.appendChild(companyCell);
                        tr.appendChild(emailCell);
                        tr.appendChild(jobCell);
                        tr.appendChild(locationCell);
                        tr.appendChild(del);
                        table.appendChild(tr);
                        


                    })
                }
                function add(){
                    if(document.getElementById("inf")!=null){
                        while(document.getElementById("inf")!=null){
                            document.getElementById("inf").remove();
                        }
                        
                    }
                    var n = document.getElementById("1").value;
                    var c = document.getElementById("2").value;
                    var e = document.getElementById("3").value;
                    var j = document.getElementById("4").value;
                    var l = document.getElementById("5").value;
                    var insert =  {
                                    "id" : i,
                                    "name" : n,
                                    "company" : {
                                        "email" : e,
                                        "jobrole" : j,
                                        "location" : l,
                                        "companyname" : c
                                    }
                    
                                }
             data.products.push(insert);
                
                                i = i+1;

                                viewdata();
               
                    
                }

              
                
                function removeitem(event,id){
                    // let da = data.products.find(da => da.id === id);
                    // let index = data.products.indexOf(da);
                    
                    // delete data.products[index];
                    
                    if(id!=null){
                    
                    let da = data.products.find(da => da.id === id);
                    let index = data.products.indexOf(da);
                    
                    // delete data.products[index];
                    if (index > -1) {

                        
                        
                        data.products.splice(index, 1); 
                        
                     }

                    
                    }
                    if(document.getElementById("inf")!=null){
                        while(document.getElementById("inf")!=null){
                            document.getElementById("inf").remove();
                        }
                        
                    }
                    viewdata();
                    // document.getElementById("inf").remove();
                    
                    
                    
                    
                }
                let i = 1114;
                    
                    
                    
            </script>
            
        </table>

        <form>

            <input class="input" id="1" type="text" placeholder="Name" />
            <input class="input" id="2" type="text" placeholder="Company" />
            <input class="input" id="3" type="text" placeholder="Email" />
            <input class="input" id="4" type="text" placeholder="Job Role" />
            <input class="input" id="5" type="text" placeholder="Location" />
            

        </form>
        
    </div>

    <button class="sm" onclick="add()">Add</button>
    <button class="sms" onclick="changeStyle()">Change Font</button>
</body>
</html>